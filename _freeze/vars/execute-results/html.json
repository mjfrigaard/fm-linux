{
  "hash": "4970a6ad62638a23cbabf8b5a9304572",
  "result": {
    "engine": "knitr",
    "markdown": "---\nengine: knitr\nknitr:\n  opts_chunk: \n    collapse: true\n    comment: '#'\n---\n\n\n\n\n\n# Variables {#sec-vars}\n\n\n\n\n\n\n\n\n\n\n:::: {.callout-important collapse='false' appearance='default' icon='false'}\n\n## [Caution]{style='font-weight: bold; font-size: 1.25em;'}\n\n::: {style='font-size: 1.00em; color: #282b2d;'}\n\n\nThis section is under development. Thank you for your patience.\n  \n\n::: \n\n::::\n\n\n\n\n\nThis chapter covers the essential aspects of variables in Unix/Linux environments. I'll be using VS Code because I can quickly switch between shells in the Terminal window.\n\n## [Unix/Linux Variables]{style=\"font-size: 1.05em; font-weight: bold;\"}\n\nVariables in Unix/Linux are used to store data that can be accessed and manipulated by the operating system and applications. They play a crucial role in scripting, programming, and managing system configurations. By storing values in variables, users and scripts can dynamically reference and change these values without hard-coding them, making scripts more flexible and maintainable.\n\nIn Unix/Linux, variables can hold different types of data, such as strings, integers, or file paths. They can be used for various purposes, including:\n\n-   Customizing the user environment (e.g., setting the default editor).\\\n-   Storing temporary data within scripts.\\\n-   Passing data between programs and scripts.\\\n-   Configuring system and application settings.\n\nThe significance of variables lies in their ability to simplify complex tasks, enhance automation, and improve the overall efficiency of the Unix/Linux environment.\n\n### Environment vs. Shell\n\nIn Unix/Linux, variables are broadly categorized into environment variables and shell variables.\n\n**Environment variables** are global variables that are available system-wide and can influence the behavior of the shell and other programs. They are inherited by all child processes.\n\nEnvironment variables are often used to configure the shell environment, set application settings, and pass data to child processes.\n\n| Variable | Description                                                |\n|----------|------------------------------------------------------------|\n| `PATH`   | Specifies the directories to search for executable files.  |\n| `HOME`   | Represents the current userâ€™s home directory.              |\n| `USER`   | Contains the name of the current user.                     |\n| `LANG`   | Defines the language and locale settings for applications. |\n\n: Common environment variables\n\n**Shell variables** are local to the shell session in which they are defined. They are not inherited by child processes unless explicitly exported.\n\nShell variables are typically used for temporary data storage within scripts, customizing the shell prompt, and managing session-specific settings.\n\n| Variable | Description                          |\n|----------|--------------------------------------|\n| `PS1`    | Defines the primary prompt string.   |\n| `PS2`    | Defines the secondary prompt string. |\n\n: Common shell variables\n\n## [Setting Variables]{style=\"font-size: 1.05em; font-weight: bold;\"}\n\nIn the following sections we'll cover setting shell and environment variables in your shell. These commands will work in Bash or Zsh.\n\n### Setting Shell Variables\n\nShell variables in Unix/Linux are defined within the context of the current shell session. To set a shell variable, simply assign a value to a variable name using the following syntax:\n\n``` sh\nVARIABLE_NAME=value\n```\n\nVariable names are case-sensitive and traditionally use uppercase letters. When creating a new variable, there should be no spaces around the `=` sign. We can check the value of the new variable using `echo`:\n\n\n\n\n\n::: {.cell}\n\n```{.bash .cell-code}\nMY_VAR=\"Hello, World\"\n```\n:::\n\n::: {.cell}\n\n```{.bash .cell-code}\necho $MY_VAR\n# Hello, World\n```\n:::\n\n\n::::{.column-margin}\n\n:::{style='font-size: 0.90rem;'}\n\nZsh ![](img/zshell-logo.png){fig-align='center' width='30'} on macOS ![](img/macos.png){fig-align='center' width='30'}.\n\n:::\n:::: \n\n\n\n\n\n### Removing Shell Variables\n\nTo remove a shell variable, use the **<code>@sec-unset</code>** command followed by the variable name:\n\n\n\n\n\n::: {.cell}\n\n```{.bash .cell-code}\nunset MY_VAR\n```\n:::\n\n\n\n\n\nAfter running unset, the variable `MY_VAR` will no longer exist in the current shell session.\n\n\nTo list all shell variables, use the **<code>@sec-set</code>** command:\n\n``` sh\nset\n```\n\n### Setting Environment Variables\n\nEnvironment variables are set similarly to shell variables but are made available to child processes by using the **<code>@sec-export</code>** command. To set an environment variable, follow these steps:\n\n1.  Assign a value to a variable.\n2.  Export the variable.\n\n\n\n\n\n::: {.cell}\n\n```{.bash .cell-code}\nMY_ENV_VAR=\"This is an environment variable\"\nexport MY_ENV_VAR\n```\n:::\n\n\n\n\n\nYou can also combine these steps into a single command:\n\n\n\n\n\n::: {.cell}\n\n```{.bash .cell-code}\nexport MY_ENV_VAR=\"This is an environment variable\"\n```\n:::\n\n\n\n\n\nTo verify the value of an environment variable, use the `echo` command:\n\n\n\n\n\n\n::::{.column-margin}\n\n:::{style='font-size: 0.90rem;'}\n\nZsh ![](img/zshell-logo.png){fig-align='center' width='30'} on macOS ![](img/macos.png){fig-align='center' width='30'}.\n\n:::\n:::: \n\n::: {.cell}\n\n```{.bash .cell-code}\necho $MY_ENV_VAR\n# This is an environment variable\n```\n:::\n\n\n\n\n\nTo list all environment variables, use the `printenv` or `env` command:\n\n\n\n\n\n::: {.cell}\n\n```{.bash .cell-code}\nprintenv\n```\n:::\n\n\n\n\n\nor\n\n\n\n\n\n::: {.cell}\n\n```{.bash .cell-code}\nenv\n```\n:::\n\n\n\n\n\n## [Using Variables]{style=\"font-size: 1.05em; font-weight: bold;\"}\n\nThe section below covers how to use environment and shell variables in the terminal and in shell script (`.sh`) files.\n\n### Using Shell Variables\n\nUsing shell variables involves referencing them within scripts or commands with a dollar sign (`$`) prefix and the variable. Below is an example of using a shell variable in an `if`/`then` loop:\n\n\n\n\n\n::: {.cell}\n\n```{.bash .cell-code}\ncount=5\nif [ $count -gt 3 ]; then \n  echo \"Count is greater than 3\"; \nfi\n# Count is greater than 3\n```\n:::\n\n\n\n\n\nThe code above could be stored in a script (`if_count.sh`), where the shell variables could be used to store and manipulate data dynamically by calling `source`:\n\n\n\n\n\n::: {.cell}\n\n```{.bash .cell-code}\ntouch if_count.sh\necho \"count=5\nif [ $count -gt 3 ]; then \n  echo \"Count is greater than 3\"; \nfi\" > if_count.sh\n```\n:::\n\n::: {.cell}\n\n```{.bash .cell-code}\nsource if_count.sh\n# if_count.sh: line 2: [: -gt: unary operator expected\n```\n:::\n\n::: {.cell}\n\n:::\n\n\n\n\n\n### Using Environment Variables\n\nEnvironment variables can be accessed in the same way as shell variables by prefixing the variable name with a dollar sign (`$`). Since they are available to child processes, environment variables are particularly useful for configuring application settings and passing data to scripts and programs.\n\nFor example, `PWD` works similar to the `pwd` command, but the path is stored as a string to use in scripts or programs.\n\n\n\n\n\n::: {.cell}\n\n```{.bash .cell-code}\necho $PWD\n# /Users/username/projects/books/fm-unix\n```\n:::\n\n\n\n\n\nIn a script, we can use environment variables to ensure that certain settings or configurations are applied (like `HOME` and `USER`)\n\nAssume the following is stored in `my_config.sh`\n\n\n\n\n\n::: {.cell}\n\n:::\n\n\n\n\n\n```sh\n#!/bin/bash\necho \"User's home directory: $HOME\"\necho \"Current user: $USER\"\necho \"Current language: $LANG\"\n```\n\nThese variables don't need to be defined in the script--they can just be stored and called directly: \n\n\n\n\n\n::: {.cell}\n\n```{.bash .cell-code}\nsource my_config.sh\n# User's home directory: /Users/username\n# Current user: username\n# Current language: en_US.UTF-8\n```\n:::\n\n::: {.cell}\n\n:::\n\n\n\n\n\n## [Key Differences]{style=\"font-size: 1.05em; font-weight: bold;\"}\n\nUnderstanding the difference between environment and shell variables is essential for effective Unix/Linux system administration and scripting. It helps users manage and customize their environment efficiently, ensuring that scripts and applications work as intended.\n\n### Scope\n\n:::{layout=\"[50,50]\" layout-valign=\"top\"}\n\nEnvironment variables have a global scope and are available to all processes. \n\nShell variables have a local scope and are limited to the shell session.\n  \n:::\n\n### Inheritance\n\n:::{layout=\"[50,50]\" layout-valign=\"top\"}\n\nEnvironment variables are inherited by child processes.\n\nShell variables need to be exported to be available to child processes.\n\n:::\n\n### Purpose\n\n:::{layout=\"[50,50]\" layout-valign=\"top\"}\n\nEnvironment variables are generally used for system-wide configuration and application settings.\n  \nShell variables are used for script-specific or session-specific tasks.\n\n:::\n\n## [Recap]{style=\"font-size: 1.05em; font-weight: bold;\"} \n\nBy understanding and utilizing shell and environment variables effectively, you can enhance the functionality and flexibility of your Unix/Linux scripts and system configurations. We'll touch on this topic again in the [shell scripts](scripts.qmd) section.\n\n\n\n\n\n````{=html}\n<!--\n## Using Variables\n\n\n\n### Setting Shell Variables\n\nBasic syntax for setting variables (`varname=value`).\n\n### Setting Environment Variables\n\nBasic syntax for exporting environment variables (`export VARNAME=value`).\n\n## [Using Variables]{style=\"font-size: 1.05em; font-weight: bold;\"} \n\n### Using Shell Variables\n\nAccessing variable values (`echo $varname`).\n\nExamples of common shell variables.\n\n### Using Environment Variables\n\nHow to make environment variables persistent (`.bashrc`, `.profile`, etc.).\n\nExamples of critical environment variables (`PATH`, `HOME`, `USER`).\n\n## [Variables, Commands and Utilities]{style=\"font-size: 1.05em; font-weight: bold;\"} \n\n- `printenv`: Displaying environment variables.\n\n- `set`: Viewing shell and environment variables.\n\n- `unset`: Deleting variables.\n\n- `export`: Marking variables to be exported to child processes.\n\n- Using `env` for running programs in a modified environment.\n\n### Variables in Scripts\n\n- How to use variables to customize scripts.\n\n- Passing variables to scripts via command line.\n\n- Reading and modifying variables within scripts.\n\n- Example script demonstrating variable use.\n\n### Advanced Variable Features\n\n- Arrays and associative arrays in Bash.\n\n- Integer operations and manipulating string variables.\n\n- Special variables (`$0`, `$1`, `$?`, `$$`, `$@`).\n\n### Security and Best Practices\n\n- Security implications of improperly handling variables.\n\n- Best practices for naming and using variables.\n\n- Avoiding common pitfalls (e.g., overwriting critical environment variables).\n\n## [Recp]{style=\"font-size: 1.05em; font-weight: bold;\"} \n\n- Recap of key points covered in the chapter.\n\n- Additional resources for deeper exploration (books, online tutorials, communities).\n\n-->\n````",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}