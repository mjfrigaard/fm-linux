{
  "hash": "1c2b89e5bc15179db1ddf0ca30653351",
  "result": {
    "engine": "knitr",
    "markdown": "---\nengine: knitr\nknitr:\n  opts_chunk: \n    collapse: true\n---\n\n\n\n\n\n# Shells {#sec-shells}\n\n\n\n\n\n\n\n\n\n\n:::: {.callout-warning collapse='false' appearance='default' icon='false'}\n\n## [Caution]{style='font-weight: bold; font-size: 1.25em;'}\n\n::: {style='font-size: 1.00em; color: #282b2d;'}\n\n\nThis section is being revised. Thank you for your patience.\n\n::: \n\n::::\n\n\n\n\n\nA **Shell** is a program that interprets commands and acts as an intermediary between the user and the kernel of the operating system. The sections below cover common Shells. Shells can be either command-line based or graphical. Some popular examples of shells include Bash, Zsh, and Fish.\n\nList all the available shells with the commands below:\n\n\n\n\n\n::: {.cell}\n\n```{.bash .cell-code}\ncat /etc/shells\n## # List of acceptable shells for chpass(1).\n## # Ftpd will not allow users to connect who are not using\n## # one of these shells.\n## \n## /bin/bash\n## /bin/csh\n## /bin/dash\n## /bin/ksh\n## /bin/sh\n## /bin/tcsh\n## /bin/zsh\n```\n:::\n\n\n\n\n\nTo change the default shell, use the `chsh` command (change shell). For example, if you want to switch to `bash`, use the command below:\n\n\n\n\n\n::: {.cell}\n\n```{.bash .cell-code}\nchsh -s /bin/bash\n```\n:::\n\n\n\n\n\nYou can use the <strong><code>@sec-echo</code></strong> and <strong><code>@sec-ps</code></strong> commands to verify the shell you're currently using:\n\n\n\n\n\n::: {.cell}\n\n```{.bash .cell-code}\necho $SHELL\n# /bin/bash\n```\n:::\n\n::: {.cell}\n\n```{.bash .cell-code}\nps -p $$\n#   PID TTY           TIME CMD\n# 16082 ttys003    0:00.02 -bash\n```\n:::\n\n\n\n\n\n## ![](img/bash-logo.svg){fig-align=\"right\" width=\"12%\"} [Bash]{style=\"font-weight: bold;\"} {#sec-bash}\n\nIntroduced in 1989, [**Bash, or the Bourne Again SHell**](https://www.gnu.org/software/bash/) has become the default command-line interface or shell for most Linux distributions. Incorporating features from the Korn shell ([`ksh`](https://en.wikipedia.org/wiki/KornShell)) and the C shell ([`csh`](https://en.wikipedia.org/wiki/C_shell)), Bash supports features like command history, tab completion, aliases and scripting tasks.[^sh_term-1]\n\n[^sh_term-1]: Bash was the default command-line interface for Apple's macOS (which is Linux-based) until the transition to `zsh` as the default shell in [macOS Catalina.](https://support.apple.com/en-us/102360)\n\n### Key features\n\n**Programming**\n\nBash includes an array of programming constructs for scripting:\n\n-   Conditional statements (`if`, `then`, `else`, `elif`, `fi`)\\\n-   Looping statements (`for`, `while`, `until`)\n\n**Interactive Command Line Editing**\n\nBash provides an interactive command line editing environment where users can navigate and edit commands directly on the command line using Emacs or Vi editing modes.\n\n**History expansion**\n\nCommands can be re-executed by recalling them from the history\n\n**Tab Completion**\n\nBash supports tab completion for command names, file names, and even command arguments, speeding up the input process and reducing typos\n\n**Comprehensive Job Control**\n\n-   Backgrounding (`&`), foregrounding (`fg`), and job management (`jobs`, `bg`)\\\n-   Stopping (suspending) processes and continuing them with `kill` and `kill -CONT`\n\n**Aliases**\n\nUsers can create shorter commands to represent longer sequences of commands using aliases\n\n**Shell Functions**\n\nBash also supports more powerful functions that can take arguments like small scripts.\n\n**Script Debugging**\n\nBash scripts can be debugged using options like `set -x` to print commands and their arguments as they are executed, which is invaluable for troubleshooting scripts\n\n**Environment Control**\n\n-   Environment variables configuration and management\n-   Variables are exported to make them available to sub-processes\n\n**Expansion Capabilities**\n\nBash supports several types of expansions that enhance its scripting capabilities:\n\n-   Brace expansion: `{a,b,c}`\n-   Tilde expansion: `~` translates to the home directory.\n-   Parameter and variable expansion: `$name` or `${name}`\n-   Arithmetic expansion: `$(( expression )0`\n\n**History Features**\n\nBash maintains a history of commands that users have executed, which can be navigated, searched, and reused. It also supports configuring the history size and behavior through various environment variables like `HISTSIZE` and `HISTFILESIZE`.\n\n\n## ![](img/zshell-logo.png){fig-align=\"right\" width=\"12%\"} [Zsh]{style=\"font-weight: bold;\"}\n\n[**Zsh (Z Shell or 'Oh My ZSH!')**](https://ohmyz.sh/) is noted for its interactive features and is often used with customization frameworks. Zsh is a powerful command-line interpreter for Linux systems that serves as both a scriptable shell and an interactive command interpreter.[^sh_term-2]\n\n[^sh_term-2]: Zsh is an [extended version](https://en.wikipedia.org/wiki/Z_shell) of **Bash (Bourne Again SHell)**, with many improvements, and is fully compatible with the Bourne Shell.\n\n\n### Key features\n\n**Command Line Editing**\n\nZsh provides an advanced and customizable command-line editing environment. Users can configure key bindings and have extensive control over the text editing capabilities directly within the command prompt.\n\n**Tab Completion**\n\nZsh has one of the most powerful tab completion systems. It supports:\n\n-   Completion for command options and arguments.\n-   Automatic listing of options when a tab is hit twice.\n-   Context-sensitive completion that can recognize patterns in filenames, history, running processes, hostnames, and more.\n\n**Themes and Prompts**\n\nZsh allows extensive customization of its prompt, supporting themes that can completely change the look of your command line. The prompt can include colors, content from shell variables, functions, and command outputs.\n\n**Scripting**\n\nZsh scripting is robust, with features like arrays, associative arrays, and floating-point arithmetic which are not typically available in all shells. It enhances scripting capabilities and improves on the scripting syntax of the Bourne Shell.\n\n**Loadable Modules**: Zsh supports dynamically loadable modules, expanding its capabilities with features like:\n\n-   FTP client\n-   TCP and UDP socket operations\n-   Advanced math functions\n-   Full-fledged regular expression matching\n\n**Improved Variable Handling**\n\nVariable handling in Zsh includes several enhancements like:\n\n-   Better array handling\n-   Associative arrays (similar to dictionaries in higher-level programming languages)\n-   Easier string manipulation and pattern matching\n\n**Spell Check and Correction**\n\nZsh can be configured to correct commands automatically if misspelled and to suggest corrections or alternatives. This feature helps in reducing syntax errors and improves user efficiency.\n\n**Extended Globbing**\n\nZsh's file globbing allows for more complex pattern matching than traditional Linux shells. You can specify patterns in a more expressive and powerful way, which is particularly useful in scripts.\n\n## ![](img/fish-logo.png){fig-align=\"right\" width=\"12%\"} [Fish]{style=\"font-weight: bold;\"}\n\n[**Fish, or the Friendly Interactive SHell**](https://fishshell.com/), is a smart and user-friendly command line shell for Linux-like operating systems. It's designed to be more interactive and user-friendly than traditional shells like Bash or Zsh.[^sh_term-3]\n\n[^sh_term-3]: Ars Technica has a great [summary](https://arstechnica.com/information-technology/2005/12/linux-20051218/) comparing Fish to other shells.\n\n\n### Key features \n\n**Autosuggestions**\n\nFish suggests commands as you type based on history and completions, just like a web browser. This feature allows users to see and reuse previous commands by simply pressing the right arrow key to complete the suggested command, which can significantly speed up typing and reduce errors.\n\n**Syntax Highlighting**\n\nOne of Fish's most noticeable features is its real-time syntax highlighting. Commands that are valid change color as you type them. It also helps users catch errors before the command is executed, such as highlighting misspelled commands or incorrect paths in red.\n\n**Web-Based Configuration**\n\nFish includes a web-based configuration interface (accessible via the `fish_config` command), which makes customizing the shell settings and prompt easier for users who prefer a graphical interface over editing configuration files manually (or if you're new to the command line).\n\n**Enhanced Tab Completion**\n\nFish provides intelligent tab completions for commands, file names, variables, and user-defined functions. It not only completes based on the prefix but also considers the whole line context, making the completions more relevant.\n\n**Improved Variables and Scoping**\n\nFish simplifies variable management, including universal variables that are automatically shared between all running shells and persist across restarts without needing explicit saving to a file. Variable scoping is also more straightforward, helping avoid common bugs seen in other shells.\n\n**Function Autoloads**\n\nFish allows functions to be defined in individual files and automatically loads them only when needed. This lazy-loading of functions helps speed up the start time of the shell.\n\n**Extensible**\n\nFish is designed to be easily extensible through plugins. The Fisherman and Oh My Fish frameworks offer many plugins and themes designed to enhance Fish's capabilities or customize its appearance.\n\n**Man Page Completions**\n\nFish generates command completions automatically from `man` pages, which means it often supports completions for all the installed commands without needing special configuration.\n\n**No Configuration Needed**\n\nFish is designed to work properly out of the box, without needing to configure it extensively. This makes it very accessible for new users or those who want a powerful shell without the need to customize or configure it heavily.\n\n**User-Friendly Scripts**\n\nFish uses a syntax that is slightly different from the traditional POSIX shell syntax, which is often simpler and easier to understand. For example, loops and conditionals are clearer, and there is no need for explicit subshell management.\n\n## [Customizations]{style=\"font-weight: bold;\"} \n\nCustomizing the shell environment can significantly enhance your productivity by tailoring it to your specific needs and preferences. The next sections cover the basics of Bash, Zsh, and Fish customization. \n\n### Prompts {#sec-shell-prompts}\n\n![](img/bash-logo.svg){fig-align=\"right\" width=\"10%\"} [Bash]{style=\"font-size: 1.05em;\"}\n\nBash offers a wide range of customization options through the `.bash_profile` file, which is sourced every time a new terminal session is started.\n\nThe `PS1` variable defines the appearance of your command prompt. Use `export PS1=` to customize the prompt in the `~/.bash_profile` file:[^prompt-vars]\n\n:::{layout=\"[50,50]\" layout-valign=\"bottom\"}\n\n\n\n:::\n\n:::{layout=\"[50,50]\" layout-valign=\"bottom\"}\n\n``` sh\n# in ~/.bash_profile\nexport PS1=\"Bash@MacBook \\W\\$ \"\n```\n\n``` sh\n# prompt\nBash@MacBook ~$ \n```\n\n:::\n\n[^prompt-vars]: `\\W` prints the basename of the current working directory. You can also specify the username (`\\u`) and the host name up to the first period (`\\h`).\n\nThis command customizes the prompt to show the username in green, the hostname, and the current working directory in blue, followed by a dollar sign.\n\n```sh\nPS1=\"\\[\\e[32m\\]\\u@\\h \\[\\e[34m\\]\\w\\[\\e[0m\\] \\$ \"\n```\n\n![](img/zshell-logo.png){fig-align=\"right\" width=\"10%\"} [Zsh]{style=\"font-size: 1.05em;\"}\n\nCustomizations in Zsh are typically done through the `.zshrc` file.\n\nZsh's `PROMPT` variable is similar to Bash's `PS1`, but with more advanced capabilities.\n\n```zsh\nPROMPT='%F{green}%n@%m %F{blue}%~ %f%# '\n```\n\nThis prompt shows the username in green, the hostname, and the current directory in blue, followed by a prompt character.\n\n![](img/fish-logo.png){fig-align=\"right\" width=\"10%\"} [Fish]{style=\"font-size: 1.05em;\"}\n\nFish customizations are generally done through the `config.fish` file, typically located in `~/.config/fish/`. Fish makes it easy to customize the prompt using the `fish_prompt` function.\n\n  \n```sh\nfunction fish_prompt\n    set_color green\n    echo -n (whoami) \"@\" (hostname) \" \"\n    set_color blue\n    echo -n (prompt_pwd)\n    set_color normal\n    echo -n \"> \"\nend\n```\n\nThis prompt shows the username in green, the hostname, and the current working directory in blue, followed by a `>` symbol.\n\n### Aliases {#sec-shell-aliases}\n\nAliases allow you to create shortcuts for commonly used commands.\n\n![](img/bash-logo.svg){fig-align=\"right\" width=\"10%\"} [Bash]{style=\"font-size: 1.05em;\"} \n\n**Bash aliases**: These aliases simplify the `ls -la` command to `ll` and `git status` to `gs`.\n  \n```sh\nalias ll='ls -la --color=auto'\nalias gs='git status'\n```\n\n![](img/zshell-logo.png){fig-align=\"right\" width=\"10%\"} [Zsh]{style=\"font-size: 1.05em;\"} \n\n**Zsh Aliases**: Zsh supports aliases in a similar manner to Bash.\n\n```sh\nalias ll='ls -lh'\n```\n\n![](img/fish-logo.png){fig-align=\"right\" width=\"10%\"} [Fish]{style=\"font-size: 1.05em;\"} \n\n**Aliases**: Fish uses the `alias` command similar to Bash and Zsh.\n\n```sh\nalias ll=\"ls -la\"\n```\n\n### Functions\n\n![](img/bash-logo.svg){fig-align=\"right\" width=\"10%\"} [Bash]{style=\"font-size: 1.05em;\"} \n\n**Bash Functions**: Bash functions allow you to create reusable scripts within your shell environment.\n\n  \n```sh\nfunction mkcd() {\n    mkdir -p \"$1\" && cd \"$1\";\n}\n```\n\nThe `mkcd` function creates a directory and then navigates into it.\n\n![](img/zshell-logo.png){fig-align=\"right\" width=\"10%\"} [Zsh]{style=\"font-size: 1.05em;\"} \n\n**Zsh Functions**: Zsh supports functions in a similar manner to Bash.\n\n```sh\nfunction extract() {\n    if [ -f $1 ]; then\n        case $1 in\n            *.tar.bz2)   tar xjf $1   ;;\n            *.tar.gz)    tar xzf $1   ;;\n            *.bz2)       bunzip2 $1   ;;\n            *.rar)       unrar e $1   ;;\n            *.gz)        gunzip $1    ;;\n            *.tar)       tar xf $1    ;;\n            *.tbz2)      tar xjf $1   ;;\n            *.tgz)       tar xzf $1   ;;\n            *.zip)       unzip $1     ;;\n            *.Z)         uncompress $1;;\n            *.7z)        7z x $1      ;;\n            *)           echo \"don't know how to extract '$1'...\" ;;\n        esac\n    else\n        echo \"'$1' is not a valid file!\"\n    fi\n}\n```\n\n![](img/fish-logo.png){fig-align=\"right\" width=\"10%\"} [Fish]{style=\"font-size: 1.05em;\"} \n\n**Fish Functions**: In Fish, functions are first-class citizens and are easy to define.\n\n```sh\nfunction mkcd\n    mkdir -p $argv; and cd $argv\nend\n```\n\n### Advanced \n\nBelow we cover some advanced customizations.\n\n![](img/bash-logo.svg){fig-align=\"right\" width=\"10%\"} [Bash]{style=\"font-size: 1.05em;\"} \n\n**Bash Completion**\n\nEnhance command-line efficiency by enabling tab completion for various commands.\n\n```sh\nif [ -f /etc/bash_completion ]; then\n    . /etc/bash_completion\nfi\n```\n\n![](img/zshell-logo.png){fig-align=\"right\" width=\"10%\"} [Zsh]{style=\"font-size: 1.05em;\"}\n\n**Oh My Zsh**\n\nA popular framework for managing Zsh configuration, making it easy to apply themes and plugins.\n\n```sh\nsh -c \"$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)\"\n```\n\nOnce installed, you can easily switch themes by editing the `ZSH_THEME` variable in your `.zshrc` file.\n\n```sh\nZSH_THEME=\"agnoster\"\n```\n\n**Zsh Completions and Plugins**\n\nZsh offers extensive tab-completion support and a variety of plugins that can be enabled for additional functionality.\n\n```sh\nplugins=(git docker kubectl)\n```\n\n![](img/fish-logo.png){fig-align=\"right\" width=\"10%\"} [Fish]{style=\"font-size: 1.05em;\"}\n\n**Universal Variables**\n\nFish supports universal variables that persist across sessions and are shared among all Fish instances.\n\n  \n```sh\nset -U fish_greeting \"Welcome to Fish Shell\"\n```\n\n**Plugins and Themes**\n\nFish has a growing ecosystem of plugins and themes, often managed by the `fisher` plugin manager.\n\n```sh\ncurl -sL https://git.io/fisher | source && fisher install jorgebucaran/fisher\nfisher install oh-my-fish/theme-bobthefish\n```\n\n\n\n\n\n\n:::: {.callout-tip collapse='true' appearance='default' icon='false'}\n\n## [Changing prompts in Zsh]{style='font-weight: bold; font-size: 1.15em;'}\n\n::: {style='font-size: 1.00em; color: #282b2d;'}\n\n\n\n\n1. Open your `.zshrc` file in your home directory with a text editor.\n\n    ``` sh\n    ~/.zshrc\n    ```\n\n2. Add or change the line that defines `PROMPT`. For example:\n\n    ``` sh\n    export PROMPT=\"Zsh@MacBook %1~%% \"\n    ```\n\nThis sets a prompt similar to Bash's example above.\n\n``` sh\nZsh@MacBook ~% \n```\n\n3. Save the file and apply the changes by sourcing the profile:\n\n    ``` sh\n    source ~/.zshrc\n    ```\n\n\n\n::: \n\n::::\n\n\n\n\n\n\n## [Recap]{style=\"font-size: 1.05em; font-weight: bold;\"}\n\nIn summary, the shell is the command interpreter that executes the commands, calls other programs (when necessary), and returns the output for the user.",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}